# 디스크의 물리적 특성

## 디스크 구조

![](./images/디스크%20구조.png)

> 디스크는 데이터를 저장하는 **자기 디스크(Platter)** 와 이를 읽고 쓰는 **헤드(Head)** 로 구성

### 플래터(Platter)

- 자기 디스크로 된 원판으로, 데이터를 저장하는 가장 기본적인 단위
- 여러 개의 플래터가 **수직으로 겹쳐져 하나의 디스크를 형성**
- 각 플래터는 자기 물질로 코팅되어 있어서 데이터를 읽고 쓸 수 있음

### 트랙(Track)

- 플래터의 표면에서 원형으로 구성된 **데이터 저장 경로**
- 중심에서 바깥쪽으로 동심원 형태로 배열
- 데이터는 트랙을 따라 순서대로 저장됨

### 섹터(Sector)

- 트랙들을 여러 개의 조각으로 나눈 **데이터 저장 단위**
- 각 섹터의 크기는 보통 512바이트
- 운영체제는 데이터를 섹터 단위로 읽고 씀

### 실린더(Cylinder)

- 같은 위치에 있는 여러 **플래터의 트랙**을 **수직으로 묶은** 개념
- 디스크 헤드는 여러 개의 플래터를 동시에 읽을 수 있기 때문에 **같은 실린더에 있는 데이터는 빠르게 접근 가능**

### 스핀들(Splindle)

- 플래터를 중심에서 지지하고 **회전시키는 축**
- 플래터는 회전하면서 데이터를 읽고 씀
- 회전 속도가 빠를수록 회전 지연 시간이 줄어들어 성능이 좋아짐

### 디스크 헤드(Head)

- 디스크 표면의 **데이터를 읽고 쓰는 장치**
- 플래터 표면 위를 떠다니면서 자기 데이터를 감지함

**헤드의 움직임**

실린더 자체를 따라 수직으로움직이는 것이 아니라, 실린더(같은 위치의 트랙들)에 도달한 후, 거기서 데이터를 읽기 위해 헤드를 깊숙이 넣거나 빼는 방식으로 동작하는 것

### 디스크 암(ARM)

- 디스크 헤드를 움직이는 기계적인 부품
- 트랙을 따라 좌우로 이동하면서 **원하는 데이터가 있는 위치로 헤드를 이동**시킴
- 헤드가 트랙을 이동하는 데 걸리는 시간이 **탐색 시간**

<br>

## 디스크 액세스 시간

### 탐색 시간(Seek Time)

**디스크 헤드가 원하는 트랙으로 이동하는 데 걸리는 시간**

⇒ 가장 시간이 오래 걸리는 과정

데이터는 플래터의 트랙에 저장되고, 헤드는 디스크 암을 움직여 목표 트랙으로 이동해야 함

즉, **트랙이 멀리 있을수록 탐색 시간이 길어짐**

✨최적화 방법: SSTF(Shortest Seek Time First)

<br>

### 회전 지연 시간(Rotation Latency)

**플래터가 회전하여 원하는 섹터가 헤드 아래에 도달하는 걸리는 시간**

프레터는 고정된 속도로 회전하며 원하는 데이터가 헤드 위치에 도달할 떄까지 기다려야함

일반적으로 한 바퀴 회전하는 시간의 절반이 회전 지연 시간이 됨

즉, **RPM이 높을수록 회전 지연 시간이 줄어들어 속도가 빨라짐**

✨최적화 방법: C-SCAN(순환 스캔), LOOK 알고리즘

<br>

### 전송 시간(Transfer Time)

**디스크에서 데이터를 읽거나 쓰는 데 걸리는 실제 전송 시간**

디스크의 섹터에서 데이터를 가져와 버퍼로 전송하는 과정으로 전송 속도는 디스크의 전송률에 따라 결정됨

전송 시간 = 데이터 크기 % 전송 속도

✨최적화 방법: 캐싱 기법, RAID(디스크 병렬 처리 기술)

<br>

### 총 디스크 액세스 시간

**디스크 엑세스 시간 = 탐색 시간 + 회전 지연 시간 + 전송 시간**

<br><br>

# 디스크 스케줄링

## 디스크 스케줄링이란?

디스크의 읽기/쓰기 요청을 어떤 순서로 처리할 지 결정하는 기법

디스크는 물리적인 장치를 이동해야 하므로 스케줄링 방식에 따라 접근 속도와 성능이 크게 달라질 수 있음

디스크 액세스 시간 중 탐색 시간이 영향을 가장 많이 끼치기 때문에 **탐색 시간을 최소화**하는 것이 디스크 액세스 시간을 줄이는 데 큰 역할을 하며, 이를 위해 **디스크 스케줄링**을 함

## 디스크 스케줄링의 목표

**디스크 액세스 성능을 최적화❗️**

- **탐색 시간 최소화**
  : 디스크 헤드의 이동 거리를 줄여 탐색 시간을 최소화
  → 하드 디스크에서 데이터 접근 시 가장 느린 부분은 디스크 암이 물리적으로 움직이는 탐색 과정
  ex) SSTF, SCAN
- **요청 처리의 공정성 유지**
  : 특정 프로세스의 입출력 요청이 너무 오래 기다리지 않도록 처리 순서 조절
  → 기아 현상이 발생할 수 있기에, 이를 방지하기 위해 적절한 우선 순위 부여 및 균형 있는 스케줄링이 필요
  ex) SCAN, C-SCAN
- **디스크 대역폭 최대화**
  : 디스크에서 가능한 많은 요청을 빠르게 처리하여 전체 성능을 향상
  → 디스크가 한 번 움직일 때 가능한 많은 요청을 처리하는 것이 효율적이고, 불필요한 이동을 줄이면 더 많은 I/O 요청을 수행 가능
  ex) SCAN, LOOK
- **마감 기한 내 요청 처리**
  : 실시간 시스템에서는 요청을 정해진 시간 안에 처리할 수 있도록 보장
  → 일반적인 컴퓨터에서는 일정 시간이 지나도 요청이 처리되면 되지만, 실시간 시스템에서는 특정 시간 내에 처리가 보장되어야 함
  ex) Deadline Scheduling

## 디스크 스케줄링 알고리즘

![](./images/디스크%20스케줄링-1.png)

### FCFS **(First Come First Service)**

**요청이 들어온 순서대로** 서비스하는 가장 단순한 디스크 스케줄링

![](./images/디스크%20스케줄링-2.jpg)

**동작 방식**

1. 디스크 요청이 들어온 순서대로 큐에 저장
2. 큐에서 꺼낸 순서대로 디스크 헤드가 이동하며 처리

**장점**

- 구현이 쉽고 직관적
- 요청이 적을 때는 효율적

**단점**

- 헤드의 이동거리가 길어 비효율적
- 기아 문제 발생 가능

<br>

### SSTF **(Shortest Seek Time First)**

현재 헤드가 있는 **위치에서 가장 가까운 트랙**부터 서비스하는 디스크 스케줄링

만약 다음에 서비스 할 두 트랙의 거리가 같다면 먼저 요청받은 트랙을 서비스함

![](./images/디스크%20스케줄링-3.jpg)

**동작 방식**

1. 현재 헤드 위치에서 가장 가까운 요청 트랙을 선택
2. 해당 요청을 처리한 후 다시 가장 가까운 트랙을 선택
3. 모든 요청이 처리될 때까지 반복

**장점**

- 헤드의 총 이동 거리가 짧아서 FCFS보다 빠름
- 빠른 응답 시간 제공

**단점**

- 기아 문제 발생 가능
- 요청이 계속 추가될 경우 처리 순서가 계속 변경될 가능성이 있음

<br>

### SCAN

헤드가 한 방향으로만 움직이면서 서비스하는 디스크 스케줄링

맨 마지막 트랙에 도착할 때까지 방향을 전환하지 않고 계속 가던 방향으로만 가면서 요청받은 트랙을 서비스

![](./images/디스크%20스케줄링-4.jpg)

**동작 방식**

1. 헤드는 한 방향으로 계속 이동하며 요청을 처리
2. 끝에 도달하면 방향을 바꿔 반대쪽으로 이동
3. 방향이 바뀌어도 요청이 있는 트랙에서만 멈춰 처리

**장점**

- 공정한 처리 가능 - 기아 문제 해결
- 요청이 몰려있어도 헤드가 계속 이동하므로 처리율이 일정

**단점**

- 불필요한 이동이 발생할 수 있음
- 헤드가 반대쪽 끝까지 이동해야 하므로 일부 요청은 늦어질 수 있음

<br>

### C-SCAN (Circular SCAN)

SCAN과 유사하지만 한 방향으로만 이동하여 요청을 처리한 후 디스크의 가장 작은 번호 위치(첫 번째 트랙)로 되돌아감

끝에 도달하면 반대방향으로 가지 않고 다시 처음부터 순서대로 요청을 처리

![](./images/디스크%20스케줄링-5.jpg)

**동작 방식**

1. 헤드는 한 방향으로 이동하며 요청을 처리
2. 끝에 도달하면 다시 처음 위치로 순간 이동
3. 처음 위치에서 다시 같은 방향으로 이동하며 요청을 처리

**장점**

- SCAN보다 일정한 응답 시간 제공
- 요청이 균등하게 처리됨

**단점**

- 되돌아갈 때의 이동이 낭비될 수 있음
- 반드시 한 방향으로만 이동해야 하므로, 요청이 적으면 불필요한 이동이 많아질 수 있음

<br>

### LOOK, C-LOOK

![](./images/디스크%20스케줄링-6.jpg)
![](./images/디스크%20스케줄링-7.jpg)

SCAN과 C-SCAN이 개선된 버전

SCAN, C-SCAN 디스크 스케줄링에서는 트랙 요청이 없어도 헤드가 0번 트랙이나 가장 마지막 트랙에 도착한 후에나 방향을 바꾸는데, LOOK, C-LOOK의 경우 더 이상 서비스할 트랙이 없으면 헤드가 끝까지 가지 않고 중간에서 방향을 바꿈

SCAN - LOOK

C-SCAN - C-LOOK

**장점**

- 불필요한 이동 최소화
- SCAN, C-SCAN보다 효율적

---

### 참고

https://limkydev.tistory.com/165

https://rob-coding.tistory.com/40

https://kjhoon0330.tistory.com/entry/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9COS-%EB%94%94%EC%8A%A4%ED%81%AC-%EA%B5%AC%EC%A1%B0%EC%99%80-%EB%94%94%EC%8A%A4%ED%81%AC-%EC%8A%A4%EC%BC%80%EC%A4%84%EB%A7%81#3.1.2.%202%20%ED%9A%8C%EC%A0%84%20%EC%A7%80%EC%97%B0%20%EC%8B%9C%EA%B0%84
